!function(){"use strict";var e,t=0;function s(){$("#line1top").html(huth.pos.customerLine1.trim()),$("#line1bottom").html(huth.pos.customerLine1.trim())}function n(){$("#line2top").html(huth.pos.customerLine2.trim()),$("#line2bottom").html(huth.pos.customerLine2.trim())}function o(t){t.ean?e.send("message","signal barcode="+t.ean):t.internalId&&e.send("message","signal centralarticleno="+t.internalId)}function i(t){t.source&&e.send("message","signal touchpage="+t.clerkId+"|"+t.source)}function a(){"undefined"!=typeof huth&&(huth.pos.state===huth.pos.State.DisconnectState?e.send("message","signal posstate=disconnected"):huth.pos.state===huth.pos.State.ClosedState?e.send("message","signal posstate=closed"):huth.pos.state===huth.pos.State.IdleState?e.send("message","signal posstate=idle"):huth.pos.state===huth.pos.State.ActiveState&&e.send("message","signal posstate=active"))}function c(t){t?e.send("message","signal transaction=opened"):e.send("message","signal transaction=closed")}function d(t){e.send("message","signal clerkid="+t)}function r(t){e.send("message","signal clerkid="+t)}function l(){e.send("message","signal clerkid=none")}let p=null;function u(e){const t="$HUTH:bridge-Address$";if(p===e.uuid)return;if(p=e.uuid,!e.uuid)return $("#qrcodetop").css("width","0"),$("#qrcodetop").css("opacity","0"),$("#qrcodebottom").css("opacity","0"),void $("#qrcodebottom").css("width","0");const s={uuid:e.uuid,method:e.method,qrVersion:e.methodVersion,urlPrefix:e.prefix};$.ajax({url:t+"/api/1.0/electronicreceipturl",type:"POST",data:JSON.stringify(s),headers:{Accept:"image/png;base64","Content-Type":"application/json"}}).done((function(e){$("#qrcodetop-img").css("background-image",'url("data:image/png;base64,'+e+'")'),$("#qrcodetop").css("width","150px"),$("#qrcodetop").css("opacity","1"),$("#qrcodebottom-img").css("background-image",'url("data:image/png;base64,'+e+'")'),$("#qrcodebottom").css("width","150px"),$("#qrcodebottom").css("opacity","1")})).fail((function(e,t,s){}))}function h(s){var n,o;return(e=new PromoWebSocket((o||(o=""),("https:"===window.location.protocol?"wss:":"ws:")+"//"+location.host+o),"PromoDisplay")).bind("open",(function(o){t=0,(n=new Date).toLocaleDateString(),n.toLocaleTimeString(),function(t,s,n){setTimeout((function(){"subscribe"===t&&s?(n(3),e.send("message","subscribe display="+s)):"function"==typeof n&&n(0)}),500)}("subscribe",s,(function(e){})),a()})),e.bind("close",(function(s){!1===s.wasClean?t<30?(t+=1,setTimeout((function(){e.connect()}),300)):location.reload(!0):!0===s.wasClean&&(t=0)})),e.bind("message",(function(e){!function(e){var t,s,n,o,i,a,c,d;if("string"==typeof e&&(e=JSON.parse(e)),e.reload)location.reload(!0);else if(e.posConfiguration)"bottom"===e.posConfiguration.posPosition?($("#postop").addClass("pos-inactive"),$("#posbottom").removeClass("pos-inactive").addClass("fadeIn"),$("#content").removeClass("fullspace")):"top"===e.posConfiguration.posPosition?($("#posbottom").addClass("pos-inactive"),$("#postop").removeClass("pos-inactive").addClass("fadeIn"),$("#content").removeClass("fullspace")):"none"===e.posConfiguration.posPosition&&($("#postop").addClass("pos-inactive"),$("#posbottom").addClass("pos-inactive"),$("#content").addClass("fullspace"));else{if(n=null,e.page&&e.page.html&&((n=$("#content")).addClass("fadeOut").removeClass("fadeIn"),n.empty(),n.html(e.page.html)),e.articles||e.page){for((o=$(".wrap-top")).css("display","none"),(a=$(".wrap-top-inner-content-spacer#contentSpacer"))&&a.css("display","none"),t=0;(i=$(".wrap-top-inner-content-item#c"+t)).length>0;)e.articles&&t<e.articles.length?(i.find(".header").html(e.articles[t].Header),0===(s=e.articles[t].Price.indexOf(",")>=0?e.articles[t].Price.split(",",2):e.articles[t].Price.split(".",2)).length&&s.push("0"),1===s.length&&s.push("00"),i.find(".price").find(".fullprice").html(s[0]+","+s[1]),i.find(".price").find(".priceprefix").html(e.articles[t].PricePrefix),i.find(".price").find(".priceIP").html(s[0]),i.find(".price").find(".priceDP").html(s[1]),i.find(".desc").html(e.articles[t].Desc),1===parseInt(e.articles[t].isPromo,0)?i.find(".promotion").addClass("isPromo"):i.find(".promotion").removeClass("isPromo"),i.css("display","inherit")):(i.css("display","none"),a&&a.css("display","inherit")),t+=1;o.css("display","inherit")}if(n&&n.addClass("fadeIn").removeClass("fadeOut"),e.media){if(c=$(".slideshow_1")){for(c.addClass("fadeOut").removeClass("fadeIn"),c.empty(),d="",t=0;t<e.media.length;t+=1)d+=e.media[t].css;for(c.append("<style>"+d+"</style>"),t=0;t<e.media.length;t+=1)"center"===e.media[t].imgposition?c.append('<div class="slides" id="'+e.media[t].id+'" style="background-image:url('+e.media[t].url+')" />'):c.append('<img class="slides" id="'+e.media[t].id+'" src="'+e.media[t].url+'" />');c.addClass("fadeIn").removeClass("fadeOut")}if(c=$(".slideshow_3")){for(c.addClass("fadeOut").removeClass("fadeIn"),d="",t=0;t<e.media.length;t+=1)d+=e.media[t].css;for(c.find("style").remove(),c.append("<style>"+d+"</style>"),t=0;t<e.media.length;t+=1)t<3&&c.find("#slideplace"+(t%3).toString()).empty(),"center"===e.media[t].imgposition?c.find("#slideplace"+(t%3).toString()).append('<div class="slides" id="'+e.media[t].id+'" style="background-image:url('+e.media[t].url+')" />'):c.find("#slideplace"+(t%3).toString()).append('<img class="slides" id="'+e.media[t].id+'" src="'+e.media[t].url+'" />');c.addClass("fadeIn").removeClass("fadeOut")}}}}($.trim(e))})),e.connect(),e}function m(){h(huth.screen.itasIdentity)}jQuery((function(){var e,t="";try{t=/[?&]webChannelBaseUrl=([A-Za-z0-9\-:\/.]+)/.exec(location.search)[1]}catch(e){}""===t?h(1):((e=new WebSocket(t)).onclose=function(e){!1===e.wasClean?location.reload(!0):e.wasClean},e.onerror=function(e){},e.onopen=function(){new QWebChannel(e,(function(e){window.huth={pos:e.objects.pos,screen:e.objects.screen},window.huth.pos=e.objects.pos,huth.pos.customerLine1Changed.connect(s),huth.pos.customerLine2Changed.connect(n),huth.screen.itasIdentityChanged.connect(m),huth.pos.articleRegistered.connect(o),huth.pos.hotkeyLayoutChanged&&huth.pos.hotkeyLayoutChanged.connect(i),huth.pos.stateChanged&&huth.pos.stateChanged.connect(a),huth.pos.transactionOpenChanged&&huth.pos.transactionOpenChanged.connect(c),huth.pos.clerkIdChanged&&huth.pos.clerkIdChanged.connect(d),huth.pos.clerkLoggedIn&&huth.pos.clerkLoggedIn.connect(r),huth.pos.clerkLoggedOff&&huth.pos.clerkLoggedOff.connect(l),huth.pos.qrCodeChanged&&huth.pos.qrCodeChanged.connect(u),s(),n(),m()}))})}))}();